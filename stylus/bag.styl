@import 'helpers'
@import 'variables'



/* ********************* *
 * ----- ANIMATION ----- *
 * ********************* *
 */


@keyframes bag
	0%
		top: 0
	43.7%
		top: 0
	50%
		top: -14px
	93.75%
		top: -14px
	100%
		top: 0


@keyframes expand
	0%
		transform scale(1)
	50%
		transform scale(1.25,1.25)
	100%
		transform scale(1)




/* ****************** *
 * ----- STYLES ----- *
 * ****************** *
 */

#header
	.shopping-bag
		text-align right

		.shopping
			display inline-block
			width auto
	.bag
		position relative

	.bag-dropdown
		position absolute
		top 0
		right 0
		width 100%
		z-index 2526   /* The shopping bag should appear over the category submenu  */

	.bag-infos

		.item-count, .countdown-amount
			display inline-block

		.item-count
			background url(../images/header/bag-icon.png) no-repeat 0 0
			color $white
			width 25px
			height 28px
			position relative
			margin 0 0 0 1px
			font-size 12px
			line-height 12px
			font-weight bold

			span
				display block
				width 27px
				text-align center
				position absolute
				bottom 5px

		&:hover
			text-decoration none

		a.item-count
			margin-right 6px

		.countdown-amount
			position absolute
			height 1em
			bottom -0.5em
			right 0
			overflow hidden
			text-align right

		.countdown-amount-content
			position relative
			animation bag 5s ease-in-out infinite

		.countdown
		.amount
			margin 0 0 0 5px
			line-height 14px
			font-size 0.7em


		.countdown
			font-size em(11/14)

			&.item-expiring
				animation expand 2s ease-out 0 infinite
				color $red
				font-weight bold
				transform-origin right center

	a.bag-infos
		cursor pointer // IE7

	a.bag-infos:hover
	a.bag-infos.open
		color $highlight

		.item-count
			background-position 0 -30px




	.bag-contents
		width 300px
		background $white
		border 4px solid $gray-medium
		box-shadow 0 10px 30px rgba(0,0,0, 0.3)
		display none
		opacity 0

		margin 0 auto
		padding 20px 10px 10px
		text-align left

		position absolute
		right 0
		top 40px
		z-index 2526  /*  This goes above the category menu which has z-index of 2502 */
		transition opacity 0.4s ease-in-out

		&.open
			opacity 1

		table
			width 100%

		th
		td
			vertical-align middle

		.wrap
			max-height 149px
			overflow auto
			margin 0 -5px 0 0
			padding 0 5px 0 0


		.unit-price
			float left

		.priceretail
		.priceshop
			display inline-block

		.priceretail
			margin 0 5px 0 0
			color #ccc

		.price
		.price-quantity
			white-space nowrap
			text-align right

		.product-image
			width 62px

			img
				display block

		.product-name a
			line-height em(16/12)
			display block

		.delete-product
			font-size em(11/12)

		.checkout
			width 100%
			margin .5em 0

	.bag-items-totals
		h1
			text-align center
			padding 2px 0
			font-weight bold
			color $title
			margin-bottom 1em

		.bag-close
			position absolute
			right 10px
			top 5px


	.bag-items
		font-size em(12/14)
		line-height em(18/12)
		margin 0 0 10px

		#qtySelect
			display none
		th
		td
			border-bottom 1px solid #e8e8e8

		td
			padding 5px 0

			&.product-image
				padding-right 10px

			&.price
			&.price-quantity
				padding-left 10px



	.bag-totals
		font-size em(12/14)
		margin 10px 0

		th
		td
			padding 2px 10px 10px

		th
			font-weight normal
			text-align left

		td
			text-align right

		.total
			font-size em(22/14)

			th
			td
				background #eee
				padding 10px 10px


	.bag-countdown
		background $gray-warm
		padding 10px
		position relative
		clearfix()

		.countdown
			font-size em(20/14)
			white-space nowrap
			text-align center
			width 60px
			position absolute
			left 10px
			top 50%
			margin-top -10px

		.what
			font-size em(12/14)
			line-height em(18/14)

			float left
			margin 0 0 0 70px

		h1
			font-size em(13/12)
			margin 0 0 5px
			color #333








/* ******************** *
 * ---- RESPONSIVE ---- *
 * ******************** *
 */

@media $mediumScreensQuery

	#header
		.bag-infos
			.countdown-amount
				position static
				height auto
				bottom auto
				right auto
				overflow visible
				text-align left

			.countdown-amount-content
				position static
				animation none

			.countdown.item-expiring
				transform-origin left center






// Commented Until Stylus fixes support for -o-min-device-pixel-ratio
//@media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1)
@media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2)

	#header
		.bag-infos .item-count
			background-image url(../images/header/bag-icon@2x.png)
			background-size 26px 60px

		a.bag-infos:hover
		a.bag-infos.open
			.item-count
				background-position 0 -30px



@media screen and (min-height:400px)
	#header .bag-contents .wrap
		max-height 149px

@media screen and (min-height:450px)
	#header .bag-contents .wrap
		max-height 199px

@media screen and (min-height:500px)
	#header .bag-contents .wrap
		max-height 249px

@media screen and (min-height:550px)
	#header .bag-contents .wrap
		max-height 299px

@media screen and (min-height:600px)
	#header .bag-contents .wrap
		max-height 349px

@media screen and (min-height:650px)
	#header .bag-contents .wrap
		max-height 399px

@media screen and (min-height:700px)
	#header .bag-contents .wrap
		max-height 449px

@media screen and (min-height:750px)
	#header .bag-contents .wrap
		max-height 499px

@media screen and (min-height:800px)
	#header .bag-contents .wrap
		max-height 549px

@media screen and (min-height:850px)
	#header .bag-contents .wrap
		max-height 599px

@media screen and (min-height:900px)
	#header .bag-contents .wrap
		max-height 649px




