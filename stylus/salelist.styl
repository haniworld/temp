@import 'nib'
@import 'helpers'
@import 'variables'
@import 'banner-list'



/* SALE-LIST
 * ---------
 * These are styles for the style-list that displays the
 * entire list of sales.  This list is displayed on
 * various pages throughout the site, including the
 * SEM pages, and various promotional pages.
 *
 */

.sale-list
	padding-left 10px
	padding-right 10px

	.banner-block
		font-size 0.8em
		padding 0.5em 5px
		-webkit-tap-highlight-color rgba(0,0,0, 0.3)

		.block-image-container
			position relative

		.block-image

			&:after
				content ''
				display block
				position absolute
				top 0
				left 0
				background-image linear-gradient(bottom, rgba(0,0,0, 0.1) 0%, rgba(0,0,0, 0.05) 10%, rgba(0,0,0, 0) 25%)
				width 100%
				height 100%

		.sale-banner-overlay
			position absolute
			left 0
			top 0
			height 100%
			width 100%
			text-align center
			overflow hidden
			opacity 0

		.block-info
			background none
			position static

		.block-info-content
			background none
			position static
			margin-top 0.5em

			.date
			.name
			.until
				color $gray-dark
				text-shadow none
				line-height 1.2em

			.date
				opacity 0.5
				font-size 0.8em
				font-family $font--sans-serif
				margin-left 1em

				&.until
					margin-left 0

				.touch &
					opacity 1

			.name
				font-style normal
				font-size 0.8em
				font-family $font-title
				letter-spacing 0.6px
				text-transform uppercase



		.login-required-title
			position absolute
			top 0
			text-align center
			width 100%
			font-size 0.7em
			background-color rgba(0,0,0,0.3)

			.ie8 &
				background-image url($imagesPath + 'backgrounds/black-60pct.png')
				background-repeat repeat

			.glyphicon
				margin-right 0.75em


/* ------------ *
 * FUTURE SALES *
 * ------------ *
 */

.sale-list-upcoming
	padding 0 0 0 2px

	.banner-block
		font-size 70%
		padding 0 2px 2px 0
		transition all 0.3s ease
		margin-bottom 0

		&:hover
			.date
				opacity 1

		.name
			font-weight 500
			font-family $font--sans-serif
			font-style normal
			text-align center
			letter-spacing 1px
			line-height 1.1em
			text-transform uppercase
		.date
			font-size 85%
			font-family $font--sans-serif

			letter-spacing 0
			line-height 1em
			margin-bottom 3px
			opacity 0.5
			transition all 0.3s ease

		.sale-banner-overlay
			position absolute
			left 0
			top 0
			height 100%
			width 100%
			text-align center
			overflow hidden
			opacity 0

/* ------------------ *
 * EARLY ACCESS SALES *
 * ------------------ *
 */

.sale-list-early-access
	.banner-block
		.block-info-content
			background none
			position static
			margin-top 0.5em

			.date
			.name
			.until
				color $white




/* BANNER STATUSES / TAGS
 * ---------------
 * Sale adds separate styles for different statuses
 * and tags on sales.
 */

.banner-block
	.sale-new
	.sale-end
	.sale-presale
	.tag-special
		.block-image-container:after
			display block
			position absolute
			bottom 0
			left 0

			background-color $highlight
			box-shadow 1px -1px 2px rgba($black, 0.15)
			color $white
			letter-spacing 1px
			line-height 1em
			font-family $font--sans-serif
			font-size 0.8em
			padding 0.85em 1.25em
			text-shadow 1px 1px 0 rgba($black, 0.3)
			z-index 1

	.sale-new
		.block-image-container:after
			content "NEW!"
	.sale-end
		.block-image-container:after
			content "今日まで"

	.sale-presale
		.block-image-container:after
			box-shadow 1px 1px 2px rgba($black, 0.15)
			content "先行セール"
			bottom auto
			top 0

	/*
	 * Tags that should only show up in
	 * lists of current sales
	 */

	.sale-list-current &

		/*
		 * Special Sale
		 */

		.tag-special:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "SPECIAL EVENT"

		/*
		 * Valentine's Day
		 */

		.tag-special.tag-valentinesday:not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "VALENTINE'S DAY"
				background-color #d00001

		/*
		 * White Day
		 */

		.tag-special.tag-whiteday:not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "WHITE DAY"
				background-color $white
				color $highlight
				text-shadow none
				box-shadow 1px -1px 2px rgba($black, 0.15), inset 1px -1px 0px $gray-warm

		/*
		 * CHRISTMAS sale tag styling
		 */

		.tag-xmas:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content ''
				background-image url($imagesPath + 'sale-tags/xmas-tag@2x.png')
				background-size 81px 70px
				background-repeat no repeat
				background-position center center
				display block
				position absolute
				left 0
				bottom 0
				height 70px
				width 81px

		.tag-special.tag-newyear:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "New Year Sale"

		.tag-special.tag-fathersday:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Father's DAY"

		.tag-special.tag-mothersday:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Mother's DAY"

		.tag-special.tag-childrensday:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Children's DAY"

		.tag-special.tag-yearendsale:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Year-End Special Sale"

		.tag-special.tag-finalsale:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Final Sale"

		.tag-special.tag-newlife:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "新生活"

		.tag-special.tag-rainyseason:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Rainy Day Special"

		.tag-special.tag-vacation:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "For Vacation"

		.tag-special.tag-sports:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Sports"

		.tag-special.tag-import:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Import"

		.tag-special.tag-debut:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "初登場"

		.tag-special.tag-bestbuy:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "オススメ!"

		.tag-special.tag-bestsellers:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Best Sellers"

		.tag-special.tag-editorspick:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Editor's Pick"

		.tag-special.tag-storymarche:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Story Marché"

		.tag-special.tag-specialcampaign:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "特別企画"

		.tag-special.tag-menslifestyle:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Men's Lifestyle"

		.tag-special.tag-stylish:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Stylish"

		.tag-special.tag-beach:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Beach"

		.tag-special.tag-max90off:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "Max 90% OFF"

		.tag-special.tag-all90off:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "All 90% OFF"

		.tag-special.tag-all75off:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "All 75% OFF"

		.tag-special.tag-all80off:not(.sale-new):not(.sale-end):not(.sale-presale)
			.block-image-container:after
				content "All 80% OFF"

/* DATE PICKER
 * -------------
 * Date chooser at the bottom of each category
 */


.sales-date-picker
	width 100%
	whitespace no-wrap
	overflow hidden

	.start-date
		position relative
		display inline-block
		color $gray-medium
		display inline-block
		padding 0 .5em
		margin .5em
		width 3em
		height 3em
		transition all 0.3s ease

		&.selected
			color $gray-dark
			border-bottom 3px solid $highlight

		&:hover
			color $gray-dark




/* SHOPPING GUIDE BANNER
 * ---------------------
 * Banner for the shopping guide appearing
 * at the top of the all page.
 */

.page-salelist
	.shopping-guide-banner
		display none
		background-color #efc794
		background-image linear-gradient(left, #efc794, #faebc6)
		color $gray-dark
		font-size 12px
		padding 2.25em 1em
		background-repeat no-repeat
		background-position 33% center
		box-shadow inset 0 1px 3px -1px rgba(0,0,0,0.25)

		.action--outline
			background-color transparent

		h2
			font-size 1.8em
			font-family $font--serif
			font-weight 700
			letter-spacing 2px
			margin-bottom 0.3em

		&.all
			display block



/* EARLY ACCESS NOTICE
 * -------------------
 * Styles for early access.
 */

.sale-banner-notice
	background-color $white

	.early-access-icon-small
		max-height 50px


/* EARLY ACCESS SECTION
 * --------------------
 * Section that appears between 5 and 9 for
 * early access users.
 */

.early-access-campaigns
	box-shadow inset 0 -2px 7px -2px rgba(0,0,0,0.25)

	.border-header
		.countdown
		h1
			color $white

		h1
			border-color $white


/* OTHER STYLES
 * ------------
 * Various other styles associated with the sales list.
 *
 * This includes the admin view styles, and in some cases,
 * some views which are legacy.
 */


.partner-banners
	clearfix()
	font-size em(11/14)
	line-height em(16/11)
	color black


.partner-banner
	float left
	width 230px
	margin 0 0 0 20px

	&:first-child
		margin-left 0

	a
	div
		background $gray-warm
		border 1px solid $gray-warm
		transition box-shadow .3s ease-out
		box-shadow 0 1px 4px #888

	a:hover
		box-shadow 0 1px 8px #888

	a
	img
	span
		display block

	a:hover
		color black
		text-decoration none

	p
		margin 0
		padding 9px
		min-height 48px // 3 lines

	img
		margin 0 auto

	span
		background white




.adminlink
	margin 0 0 1em

	a
		display inline-block
		background #eee
		padding 5px 20px




#admin-sales

	.periods
		margin 0 0 1em

		li
			display inline

			&:after
				content: "|"

	.active
		background #ccc
		padding 0 5px
		display inline-block


	.sale-block
		background #eee
		box-shadow none


	.time
		padding 1px 2px
		color #999
		font-size em(11/14)

	.sale-data
		padding 5px




.inactive-campaign-label
.offered-only-campaign-label
	position absolute
	z-index 10
	text-align center
	width 100%
	background #fff
	letter-spacing 2px
	font-weight 700
	text-transform uppercase
	padding 5px
	top 45%
	opacity 0.9

.warnings-campaign-label
	position absolute
	top 30%

	color $white
	font-weight 700
	letter-spacing 2px
	padding 5px
	text-align center
	text-shadow 0 2px 15px rgba($black, 0.7)
	text-transform uppercase
	width 100%
	z-index 10


	.warning
		color $red
		background #fff
		padding 2px 4px 2px 4px
		border-radius 3px
		margin-right 5px







/* **************************** *
 * ---- TOUCH-BASED STYLES ---- *
 * **************************** *
 */

/* ------- NON-TOUCH DEVICES --------- */
.no-touch
	.admin .sale-list-upcoming
	.sale-list
		.banner-block
			.date
				opacity 0.5

			.date
			.sale-banner-overlay
				transition all 0.3s ease-in-out

			&:hover
				.date
					opacity 1

				.block-info
					background none

				.sale-banner-overlay
					box-shadow 0 5px 38px rgba(0,0,0,0.22)
					opacity 1

				.sale-logo
					text-decoration none



/* *************************** *
 * ---- RESPONSIVE STYLES ---- *
 * *************************** *
 */


@media $smallScreensQuery

	.sale-list-upcoming
		padding-right 1em
		padding-left 1em

		.banner-block
			padding 2px
			font-size 90%

	/*
	 * If there are less than 2 sales make it
	 * 100% and centered.
	 */

	.sale-list-early-access
		.banner-block
			&:first-child:only-child
				width 100%
				text-align center

				& > a
					display inline-block
					width 50%



@media $mediumScreensQuery

	.sale-list
		.banner-block
			font-size 1.05em

			&.pure-u-md-1-3
				font-size 1em
				line-height 1.2em

			&.pure-u-md-1-4
				font-size 0.95em
				line-height 1.1em

			.block-info
				font-size 0.9em


	.sale-list-upcoming
		.banner-block
			font-size 90%

	.page-salelist
		.shopping-guide-banner.all
			background-image url($imagesPath + '/shopping-guide/salelist-banner/banner-bag-bg.jpg')
			background-position center center
			font-size 14px


@media $largeScreensQuery

	/*
	 * Special formatting for less than 3 sales in the presale section.
	 */

	.sale-list-early-access
		.banner-block

			/*
			 * If there are less than 3 sales make them 50%
			 */

			&:nth-last-child(2):first-child
			&:nth-child(2):last-child
				width 50%

				& > a
					display inline-block
					width 66.66666%
					text-align center

			/*
			 * Push the two blocks next to each other to remove
			 * unnecessary space.
			 */

			&:nth-last-child(2):first-child
				text-align right

			&:nth-child(2):last-child
				text-align left

			/*
			 * If you are the only sale in the presale
			 * section, become 100% wide.
			 */

			&:first-child:only-child
				text-align center
				width 100%

				& > a
					display inline-block
					width 33.33333%
					text-align center